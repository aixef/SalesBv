<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <description>Se ocupara para mostrar la información de la póliza en caso, cuando se tenga una contratación asociada</description>
    <interviewLabel>Información de la Póliza {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Información de la Póliza</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordLookups>
        <description>obtener registros de los casos para ocuparlos en el flujo mas adelante</description>
        <name>MX_SB_SAC_ObtenerDatosCaso</name>
        <label>Obtener datos Caso</label>
        <locationX>189</locationX>
        <locationY>51</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>MX_SB_SAC_ObtenerDatosContrato</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>MX_SB_SAC_OptencionFolioCasoID</elementReference>
            </value>
        </filters>
        <object>Case</object>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioCuenta.Id</assignToReference>
            <field>AccountId</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioCasoID</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioContratoID</assignToReference>
            <field>MX_SB_SAC_Contrato__c</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <description>Guardar los valores del objeto relacionado del contrato para ocupar lo mas adelante dentro del flujo</description>
        <name>MX_SB_SAC_ObtenerDatosContrato</name>
        <label>Obtener datos Contrato</label>
        <locationX>355</locationX>
        <locationY>51</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>MX_SB_SAC_ObtenerDatosCuenta</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>MX_SB_SAC_OptencionFolioContratoID</elementReference>
            </value>
        </filters>
        <object>Contract</object>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioContrato.AccountId</assignToReference>
            <field>AccountId</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioContrato.EndDate</assignToReference>
            <field>EndDate</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioContrato.MX_SB_SAC_NombreClienteAsegurado__c</assignToReference>
            <field>MX_SB_SAC_NombreClienteAsegurado__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioContrato.MX_SB_SAC_Segmento__c</assignToReference>
            <field>MX_SB_SAC_Segmento__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioContrato.MX_SB_SAC_TipoMoneda__c</assignToReference>
            <field>MX_SB_SAC_TipoMoneda__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioContrato.MX_SB_SAC_Tipotarjetapago__c</assignToReference>
            <field>MX_SB_SAC_Tipotarjetapago__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioContrato.MX_SB_VTS_Precio_Anual__c</assignToReference>
            <field>MX_SB_VTS_Precio_Anual__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioProductoID</assignToReference>
            <field>MX_WB_Producto__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioContrato.MX_WB_noPoliza__c</assignToReference>
            <field>MX_WB_noPoliza__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioContrato.StartDate</assignToReference>
            <field>StartDate</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>MX_SB_SAC_ObtenerDatosCuenta</name>
        <label>Obtener datos Cuenta</label>
        <locationX>509</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>MX_SB_SAC_ObtenerDatosProducto</targetReference>
        </connector>
        <object>Account</object>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioCuenta.Id__c</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioCuenta.Name</assignToReference>
            <field>Name</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>MX_SB_SAC_ObtenerDatosProducto</name>
        <label>Obtener datos producto</label>
        <locationX>657</locationX>
        <locationY>49</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>MX_SB_SAC_InformacionGralPoliza</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>MX_SB_SAC_OptencionFolioProductoID</elementReference>
            </value>
        </filters>
        <object>Product2</object>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioProductoID</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>MX_SB_SAC_OptencionFolioProducto.Name</assignToReference>
            <field>Name</field>
        </outputAssignments>
    </recordLookups>
    <screens>
        <name>MX_SB_SAC_InformacionGralPoliza</name>
        <label>Información General de la Póliza</label>
        <locationX>816</locationX>
        <locationY>50</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>InformacionContrato</name>
            <fieldText>&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0);&quot;&gt;Número de poliza:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;{!MX_SB_SAC_OptencionFolioContrato.MX_WB_noPoliza__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0);&quot;&gt;Nombre del contratante:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;{!MX_SB_SAC_OptencionFolioCuenta.Name}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0);&quot;&gt;Nombre del asegurado:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;{!MX_SB_SAC_OptencionFolioContrato.MX_SB_SAC_NombreClienteAsegurado__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;font-size: 12px; color: rgb(0, 0, 0);&quot;&gt;Vigencia&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0);&quot;&gt;Inicio:&lt;/b&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt; {!MX_SB_SAC_OptencionFolioContrato.StartDate}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0);&quot;&gt;Fin:&lt;/b&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt; {!MX_SB_SAC_OptencionFolioContrato.EndDate}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0); font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt;Fecha de emisión &lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);&quot;&gt;{!MX_SB_SAC_OptencionFolioContrato.StartDate}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0);&quot;&gt;Producto:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;{!MX_SB_SAC_OptencionFolioProducto.Name}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0);&quot;&gt;Segmento: &lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;{!MX_SB_SAC_OptencionFolioContrato.MX_SB_SAC_Segmento__c}﻿&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0);&quot;&gt;Tipo de moneda:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;{!MX_SB_SAC_OptencionFolioContrato.MX_SB_SAC_TipoMoneda__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0);&quot;&gt;Forma de pago:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;{!MX_SB_SAC_OptencionFolioContrato.MX_SB_SAC_Tipotarjetapago__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0);&quot;&gt;Prima total:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;{!MX_SB_SAC_OptencionFolioContrato.MX_SB_VTS_Precio_Anual__c}&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>false</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <startElementReference>MX_SB_SAC_ObtenerDatosCaso</startElementReference>
    <status>Active</status>
    <variables>
        <description>vinculación a objeto caso</description>
        <name>MX_SB_SAC_OptencionFolioCaso</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <description>guardar id del caso</description>
        <name>MX_SB_SAC_OptencionFolioCasoID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <description>Vinculación al objeto Contrato</description>
        <name>MX_SB_SAC_OptencionFolioContrato</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Contract</objectType>
    </variables>
    <variables>
        <description>Guardar el ID de contrato relacionado</description>
        <name>MX_SB_SAC_OptencionFolioContratoID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>MX_SB_SAC_OptencionFolioCuenta</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>MX_SB_SAC_OptencionFolioCuentaID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <description>Vinculación al objeto producto</description>
        <name>MX_SB_SAC_OptencionFolioProducto</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Product2</objectType>
    </variables>
    <variables>
        <description>Guardar el ID de producto relacionado al contrato</description>
        <name>MX_SB_SAC_OptencionFolioProductoID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
</Flow>
